$panel-bg: #f2f2f2 !default;
$panel-font-color-alt: #fff !default;
$panel-font-color: #333 !default;
$panel-margin-bottom: rem-calc(20) !default;
$panel-padding-small: rem-calc(8 10) !default;
$panel-padding: rem-calc(16 20) !default;

@mixin panel-color($bg: $panel-bg) {
  background: $bg;
  border: 1px solid darken($bg, 11%);

  // We set the font color based on the darkness of the bg.
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  li,
  dl {
    color: if(lightness($bg) >= 50%, $panel-font-color, $panel-font-color-alt);
  }
}

@mixin fustrate-panels {
  .panel {
    @include panel-color;
    font-size: rem-calc(14);
    margin-bottom: $panel-margin-bottom;
    padding: $panel-padding;

    // reset header line-heights for panels
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      line-height: 1;
      margin-bottom: rem-calc(20) / 2;
    }

    ul,
    ol,
    dl {
      font-size: inherit;
    }

    // Respect the padding, fool.
    & > :first-child {
      margin-top: 0;
    }

    & > :last-child {
      margin-bottom: 0;
    }

    &.radius {
      border-radius: 3px;
    }

    &.info {
      @include panel-color(lighten($info-color, 5%));
    }

    &.success {
      @include panel-color(lighten($success-color, 20%));
    }

    &.danger {
      @include panel-color(scale-color($danger-color, $lightness: 70%, $saturation: -20%));
    }

    &.small {
      padding: $panel-padding-small;
    }
  }
}
